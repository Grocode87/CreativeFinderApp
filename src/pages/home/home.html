<ion-header>
    <ion-navbar>
        <button *ngIf="!toggled" ion-button icon-only menuToggle><ion-icon name="menu"></ion-icon></button>
        <!-- Title -->
        <img *ngIf="!toggled" src="/assets/imgs/header-logo.png" width="180px" style="display:inline-block" height="40px" />
        <!-- Search Bar -->
        <ion-searchbar #searchbar *ngIf="toggled" [(ngModel)]="searchTerm" [showCancelButton]="true" (ionCancel)="toggleSearch();" (ionBlur)="searchBlurred();" (search)="searchQuery($event)"></ion-searchbar>
        <!-- Search Icon -->
        <ion-buttons end *ngIf="!toggled">
            <button ion-button icon-only (click)="toggleSearch()"><ion-icon name="search"></ion-icon></button>
        </ion-buttons>
    </ion-navbar>
</ion-header>


<ion-content class='content'>
    <ion-refresher (ionRefresh)="refresh($event)" spinner="none">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>

    <ion-spinner name="crescent" *ngIf="!featured || !popular"></ion-spinner>
    <!-- web featured slider-->
    <ion-grid class='web-featured-maps' *ngIf='!isApp'>
        <ion-row>
            <ion-col width-100>
                <ion-slides pager slidesPerView="1" spaceBetween="5" class="slider">
                    <ion-slide *ngFor='let map of featured' (click)="mapClicked(map)">
                        <div class="sliderTextParent">
                            <img src="{{map.img}}">
                            <div class='slider-text'>
                                <div class='title'>{{ map.name }}</div>
                                <div class="author">{{ map.creator }}</div>
                                <div class="desc">{{ map.desc }}</div>
                                <div class='code'>{{ map.code }}</div>
                            </div>
                        </div>
                    </ion-slide>
                </ion-slides>
            </ion-col>
        </ion-row>
    </ion-grid>

    <div *ngIf='featured && popular'>
        <!-- app features slider-->
        <ion-grid class='featured-maps' *ngIf='isApp'>
            <ion-row>
                <ion-col width-100>
                    <ion-slides pager slidesPerView="1.05" spaceBetween="5" class="slider">
                        <ion-slide *ngFor='let map of featured' (click)="mapClicked(map)">
                            <div class="sliderTextParent">
                                <img src="{{map.img}}">
                                <div class='code-text'>{{ map.code }}</div>
                                <ion-row class='title-row'>
                                    <ion-col col-9>
                                        <div class='title'>{{ map.name }}</div>
                                    </ion-col>
                                    <ion-col col-3>
                                        <div class='type'> {{ map.types[0] }}</div>
                                    </ion-col>
                                </ion-row>
                                <ion-row>
                                    <ion-col>
                                        <div class="author">{{ map.creator }}</div>
                                        <div class="desc">{{ map.desc }}</div>
                                    </ion-col>
                                </ion-row>
                            </div>
                        </ion-slide>
                    </ion-slides>
                </ion-col>
            </ion-row>
        </ion-grid>

        <div class='top-maps-title'>Top Maps</div>

        <!-- website list -->
        <ion-grid class='web-maps-list' *ngIf='!isApp'>
            <ion-row class='resp-row'>
                <ion-col class="resp-col" *ngFor="let map of popular" col-12 col-xl-4 col-lg-4 col-md-6>
                    <ion-card class='resp-card'>
                        <img class="img" src="{{map.img}}">
                        <div class="title" text-wrap>{{ map.name }}</div>
                        <div class="author">{{ map.creator }}</div>
                        <div class="type"> {{ map.types[0] }}</div>
                        <div class="code">{{ map.code }}</div>
                    </ion-card>
                </ion-col>
            </ion-row>
        </ion-grid>

        <!-- regular app list-->
        <ion-list class='maps-list' *ngIf='isApp'>
            <ion-item (click)="mapClicked(map)" *ngFor="let map of popular">
                <ion-grid>
                    <ion-row>
                        <ion-col col-5>
                            <img class="img" src="{{map.img}}">
                        </ion-col>
                        <ion-col col-7>
                            <div class="title" text-wrap>{{ map.name }}</div>
                            <div class="author">{{ map.creator }}</div>
                            <div class="type"> {{ map.types[0] }}</div>
                            <div class="code">{{ map.code }}</div>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </ion-item>
        </ion-list>
    </div>
</ion-content>